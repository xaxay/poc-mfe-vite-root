import{components as w}from"vuetify";import{defineComponent as C,ref as V,openBlock as u,createBlock as m,withCtx as t,createTextVNode as i,createVNode as n,createElementBlock as h,Fragment as g,toDisplayString as _,createCommentVNode as D,renderList as U,onMounted as b,onBeforeUnmount as L,computed as N,resolveComponent as S}from"vue";import{navigateTo as A,getCurrentRoute as I}from"@browser-module/api/nav";import{getUserLogin as y}from"@browser-module/api/user";import{useRoute as B}from"vue-router";import{_ as T}from"./--plugin-vue--export-helper-DlAUqK2U.js";const E=async e=>{if(!e)return[];const r=y();if(!r.includes(e))return[];const o=[{name:e}];return e!==r&&r.includes(e)&&o.unshift({name:r}),o},M=async e=>{if(!e)return null;const r=y();if(e!=r)return null;const o=["account","rumors","app4","app5","app6","app7","app8","app9","app11","app12","app13","app14","app15","app16","app17","app18"];return e==="admin"&&o.push("admin"),o.sort(Q),{name:e,permissions:o}},Q=(e,r)=>{const o=/(\D+)(\d+)?/,c=e.match(o),p=r.match(o);if(!c||!p)throw new Error("Unexpected non-matching string format");const[,d,s]=c,[,l,a]=p;return d<l?-1:d>l?1:s!==void 0&&a!==void 0?parseInt(s)-parseInt(a):s!==void 0?-1:a!==void 0?1:0},F=C({name:"SearchUser",setup(){const e=V(""),r=V([]);return{searchQuery:e,users:r,searchUsers:async()=>{e.value.length>2?r.value=await E(e.value):r.value=[]},goToUserDetails:p=>{A({path:`/admin/users/details/${p}`})}}}}),{VTextField:P,VListItemTitle:R,VListItem:z,VList:W,VContainer:j}=w;function q(e,r,o,c,p,d){return u(),m(j,{fluid:""},{default:t(()=>[i(" Search: "),n(P,{modelValue:e.searchQuery,"onUpdate:modelValue":r[0]||(r[0]=s=>e.searchQuery=s),label:"Input user name",flat:"",clearable:"","prepend-inner-icon":"mdi-magnify",onInput:e.searchUsers},null,8,["modelValue","onInput"]),e.users.length?(u(),h(g,{key:0},[i(" Found user"+_(e.users.length>1?"s":"")+" ",1),e.users.length>1||!e.users.map(s=>s.name).includes(e.searchQuery)?(u(),h(g,{key:0},[i(" with name like *"+_(e.searchQuery)+"* ",1)],64)):D("",!0),n(W,null,{default:t(()=>[(u(!0),h(g,null,U(e.users,s=>(u(),m(z,{key:s.name,onClick:l=>e.goToUserDetails(s.name)},{default:t(()=>[n(R,null,{default:t(()=>[i(_(s.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):D("",!0)]),_:1})}const G=T(F,[["render",q]]),H=C({name:"UserDetails",setup(){const e=B(),r=V(null);return b(async()=>{const o=e.params.name;o&&(r.value=await M(o))}),{userDetails:r}}}),{VIcon:J,VAvatar:K,VCol:v,VRow:$,VCardTitle:O,VDivider:X,VChip:Y,VCardText:Z,VCard:x,VContainer:ee}=w;function te(e,r,o,c,p,d){return u(),m(ee,null,{default:t(()=>[n($,{justify:"center"},{default:t(()=>[n(v,{cols:"12"},{default:t(()=>[n(x,{class:"pa-2"},{default:t(()=>[n(O,null,{default:t(()=>[n($,{align:"center"},{default:t(()=>[n(v,{cols:"auto"},{default:t(()=>[n(K,null,{default:t(()=>[n(J,null,{default:t(()=>[i("mdi-account")]),_:1})]),_:1})]),_:1}),n(v,null,{default:t(()=>[i(_(e.userDetails?.name),1)]),_:1})]),_:1})]),_:1}),n(X),n(Z,null,{default:t(()=>[n($,null,{default:t(()=>[n(v,{cols:"12"},{default:t(()=>[i(" Permissions: ")]),_:1})]),_:1}),n($,null,{default:t(()=>[(u(!0),h(g,null,U(e.userDetails?.permissions,s=>(u(),m(v,{key:s,cols:"auto"},{default:t(()=>[n(Y,null,{default:t(()=>[i(_(s),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ne=T(H,[["render",te]]);function Ve(e){return[{path:"users",component:G,alias:["","users"]},{path:"users/details/:name",component:ne},{path:":pathMatch(.*)*",redirect:`${e}/users`}]}const re=C({name:"Admin",setup(){const e=V(!1),r=y(),o=V(!1),c=()=>{const a=parseFloat(getComputedStyle(document.documentElement).fontSize);o.value=window.innerWidth>=a*32};b(()=>{c(),window.addEventListener("resize",c)}),L(()=>{window.removeEventListener("resize",c)});const p=N(()=>[{title:"Users",icon:"mdi-account-search-outline",exact:!0,path:"/admin/users",alias:"/admin"},{title:"User",icon:"mdi-account-outline",exact:!1,path:"/admin/users/details/",pathClcik:`/admin/users/details/${r}`,altTitle:"User (Me)"}]);function d(a){const f=I().path;return a.exact?!!(f===a.path||a.alias&&f===a.alias):!!f.startsWith(a.path)}function s(a){const f=I().path;return a.pathClcik&&f===a.pathClcik&&a.altTitle||a.title}function l(){e.value=!e.value}return{drawer:e,items:p,isActive:d,getTitle:s,toggleDrawer:l,isLargeScreen:o}}}),{VAppBarNavIcon:ae,VToolbarTitle:oe,VAppBar:se,VIcon:le,VListItemTitle:ue,VListItem:ie,VList:ce,VNavigationDrawer:pe,VContainer:k}=w;function de(e,r,o,c,p,d){const s=S("router-view");return u(),m(k,{fluid:""},{default:t(()=>[n(se,{app:""},{default:t(()=>[n(ae,{onClick:e.toggleDrawer},null,8,["onClick"]),n(oe,null,{default:t(()=>[i("Admin Panel")]),_:1})]),_:1}),n(pe,{modelValue:e.drawer,"onUpdate:modelValue":r[0]||(r[0]=l=>e.drawer=l),app:"",clipped:e.isLargeScreen,permanent:e.isLargeScreen},{default:t(()=>[n(ce,{dense:""},{default:t(()=>[(u(!0),h(g,null,U(e.items,(l,a)=>(u(),m(ie,{key:a,to:l.pathClcik||l.path,router:"",active:e.isActive(l)},{prepend:t(()=>[n(le,null,{default:t(()=>[i(_(l.icon),1)]),_:2},1024)]),default:t(()=>[n(ue,null,{default:t(()=>[i(_(e.getTitle(l)),1)]),_:2},1024)]),_:2},1032,["to","active"]))),128))]),_:1})]),_:1},8,["modelValue","clipped","permanent"]),n(k,{fluid:""},{default:t(()=>[n(s)]),_:1})]),_:1})}const $e=T(re,[["render",de]]);export{Ve as createRouteChildren,$e as default};
